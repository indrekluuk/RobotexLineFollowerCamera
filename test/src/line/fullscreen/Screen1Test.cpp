//
// Created by indrek on 13.11.2016.
//


#include "line/Line.h"
#include "gtest/gtest.h"



TEST(Screen1Test, test) {

  uint16_t screen[120] = {
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000, // 110
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'00000000,
      0b00000000'11000000, //     13
      0b00000000'11000000, //100  13
      0b00000000'11000000, //     13
      0b00000000'11000000, //     13
      0b00000000'11000000, //     13
      0b00000000'11000000, //     13
      0b00000000'11000000, //     13
      0b00000000'11000000, //     13
      0b00000000'11000000, //     13
      0b00000000'11000000, //     13
      0b00000000'11000000, //     13
      0b00000001'11000000, //90  12
      0b00000001'10000000, //     11
      0b00000001'10000000, //     11
      0b00000001'10000000, //     11
      0b00000001'10000000, //     11
      0b00000001'10000000, //     11
      0b00000001'10000000, //     11
      0b00000001'10000000, //     11
      0b00000001'10000000, //     11
      0b00000001'10000000, //     11
      0b00000001'10000000, //80   11
      0b00000001'10000000, //     11
      0b00000011'10000000, //    10
      0b00000011'10000000, //    10
      0b00000011'10000000, //    10
      0b00000011'10000000, //    10
      0b00000011'10000000, //    10
      0b00000011'10000000, //    10
      0b00000011'00000000, //     9
      0b00000011'00000000, //     9
      0b00000011'00000000, //70   9
      0b00000011'00000000, //     9
      0b00000011'00000000, //     9
      0b00000011'00000000, //     9
      0b00000011'00000000, //     9
      0b00000011'00000000, //     9
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000111'00000000, //60  8
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000111'00000000, //    8
      0b00000110'00000000, //     7
      0b00000110'00000000, //     7
      0b00001110'00000000, //50  6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //40  6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00001110'00000000, //    6
      0b00011110'00000000, //     5
      0b00011110'00000000, //     5
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00011100'00000000, //30  4
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00011100'00000000, //    4
      0b00111100'00000000, //     3
      0b00111100'00000000, //20   3
      0b00111100'00000000, //     3
      0b00111100'00000000, //     3
      0b00111100'00000000, //     3
      0b00111100'00000000, //     3
      0b00111100'00000000, //     3
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00111000'00000000, //10  2
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00111000'00000000, //    2
      0b00011000'00000000, //     1
      0b00011000'00000000, //     1
      0b00011000'00000000  //0    1
  };

  Line<120> line;
  for (uint8_t i=0; i<120; i++) {
    uint16_t screenRow = screen[120-i-1];
    line.setRowBitmap(i, (screenRow >> 8) & 0xFF, (screenRow) & 0xFF);
  }

  ASSERT_TRUE(line.isLineIdentified());
  ASSERT_EQ(100, line.getLineLastRowIndex());
  ASSERT_EQ(12, line.getLineLastPosition());

}



